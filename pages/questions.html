<!DOCTYPE html>
<html>
	<head>
		<title>Semear o Futuro</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="/socket.io/socket.io.js"></script>
	
		
		
	</head>
	<style>
		body {
	text-align: center;
	overflow: hidden;
	background-color: lavender;
}

#questions_box {
	margin: 4%;
	text-align: center;
	font-size: 3.5em;
	font-weight: bold;
	font-family: Helvetica;
}
#points {
	font-size: 1.5em;
}
#options_box {
	margin-top: 5%;
	margin-left: auto;
	margin-right: auto;
	text-align: center;
}

.submit_button {
	width: 400px;
	height: 100px;
	margin: 20px;
	cursor: pointer;
	transition: transform 0.3s;
	background-color: cadetblue;
	border: 4px solid cadetblue;
	padding: 10px;
	border-radius: 4px;
	 
    font-size: 1.8vw;
	font-family: Helvetica;
	text-align: center;
	
}

#big_title {
	font-family: Calibri;
	font-size: 900%;
	color: lavender;
}

.input {
	font-family: Helvetica;
	font-size: 200%;
	padding: 5px;
	border: 3px solid CadetBlue;
}

#username_input {
	border-left: 6px solid CadetBlue;
}
#points{
	margin-top: 10%;
	font-family: Helvetica;
	font-size: 200%;
}
	</style>
	<body>
			<div id="questions_box">
					<span class="question"><span class="curquestion"></span></span>
					<br>
					<span id="points"></span>
			</div>
				<div id="options_box">
					<div class="choice_buttons_1">
						<button id="button_0" class="submit_button"><span class="quest_button_0" id="0"></span></button>
						<button id="button_1" class="submit_button"><span class="quest_button_1" id="1"></span></button>
					</div>
					<div class="choice_buttons_2">
						<button id="button_2" class="submit_button"><span class="quest_button_2" id="2"></span></button>
						<button id="button_3" class="submit_button"><span class="quest_button_3" id="3"></span></button>
					</div>
					<div class="special_buttons">
							<button id="button_0" class="submit_button"><span class="special_button_0" id="0"></span></button>
							<br/>
							<button id="button_1" class="submit_button"><span class="special_button_1" id="1"></span></button>
					</div>
				</div>

		
		<script>
			const socket = io();
			
			
			var classyboi = parent.document.URL.substring(parent.document.URL.indexOf('?'), parent.document.URL.length);
			turma = classyboi.slice(7).split('-')[0];
			group = classyboi.slice(7).split('-')[1];
			
			

				
			
			var questions = []
			var currentQuestion = 0
		



				questions = {

				[0]: {
					banca: "Ginásio",
						[0]: {
							question:"Esta energia é boa porque?",
							options:{
								[0]:"É renovável e conseguimos produzir em casa",
								[1]:"Não e renovável mas conseguimos produzir em casa",
								[2]:"Não e renovável nem conseguimos produzir em casa",
								[3]:"É renovável mas n conseguimos produzir em casa"
							},
							right:0
						},
						[1]: {
							question:"Como possível produzir energia apartir da bicicleta?",
							options:{
								[0]:"A partir da energia cinética (energia associada ao movimento) da bicicleta",
								[1]:"Usando o peso da pessoa que pedala",
								[2]:"Montando e desmontando partes da bicicleta",
								[3]:"Helicopetro"
							},
							right:0
						},
						[2]: {
							question:"Qual é a energia que é mais sustentavel?",
							options:{
								[0]:"Carvao",
								[1]:"Termoeletrica",
								[2]:"Nuclear",
								[3]:"Eólica"
							},
							right:3
						},
						[3]: {
							question:"Será correto mandar lixo po chao?",
							options:{
								[0]:"Sim",
								[1]:"Não",
								
							},
							right:0
						}
				},
				[1]: {
				banca: "Espaços Verdes",
				[0]: {
					question:"Qual é que é a planta mais pequena?",
					options:{
						[0]:"Girassol",
						[1]:"Rosa",
						[2]:"Orquidea",
						[3]:"Erva daninha"
					},
					right:3
				},
				[1]: {
					question:"O que se deve usar para regar as plantas?",
					options:{
						[0]:"Petroleo",
						[1]:"Detergente",
						[2]:"Agua",
						[3]:"Azeite"
					},
					right:2
				},
				[2]: {
					question:"Qual o melhor sistema para tratar as plantas?",
					options:{
						[0]:"Pesticidas",
						[1]:"Agroquimicos",
						[2]:"Água produzida em Chernobil",
						[3]:"Nenhum dos outros"
					},
					right:2
				},
				[3]: {
					question:"Será correto poluir os jardins?",
					options:{
						[0]:"Sim",
						[1]:"Não",
						
					},
					right:0
				}
				}

			}

			
			$(document).ready(function(){
				getPoints();
				function addQuestion(){
					$('.curquestion').html(questions[group][currentQuestion].question);
					$('.quest_button_0').html(questions[group][currentQuestion].options[0]);
					$('.quest_button_1').html(questions[group][currentQuestion].options[1]);
					$('.quest_button_2').html(questions[group][currentQuestion].options[2]);
					$('.quest_button_3').html(questions[group][currentQuestion].options[3]);
				}
				function nextQuestion(){
					
					if (currentQuestion == 2) {
						currentQuestion++;
						$('.choice_buttons_1').hide();
						$('.choice_buttons_2').hide();

						$('.curquestion').html(questions[group][currentQuestion].question);
					$('.special_buttons').show();
					$('.special_button_0').html(questions[group][currentQuestion].options[0]);
					$('.special_button_1').html(questions[group][currentQuestion].options[1]);
					}else if (currentQuestion == 3){
							window.location = "https://ecoescolas.herokuapp.com/inicio";
					}else {
					currentQuestion++;
					$('.curquestion').html(questions[group][currentQuestion].question);
					$('.quest_button_0').html(questions[group][currentQuestion].options[0]);
					$('.quest_button_1').html(questions[group][currentQuestion].options[1]);
					$('.quest_button_2').html(questions[group][currentQuestion].options[2]);
					$('.quest_button_3').html(questions[group][currentQuestion].options[3]);
					}
				}
				$("#points").hide();
				$(".special_buttons").hide();
			$('.choice_buttons_1').hide();
			$('.choice_buttons_2').hide();
			$('.curquestion').html(questions[group].banca);
			setTimeout(function(){
				$("#points").show();
				$('.choice_buttons_1').show();
				$('.choice_buttons_2').show();
				addQuestion();
			},3000);



				$(".submit_button").click(function(){
						var id = $(this).attr('id'); // $(this) refers to button that was clicked
						id = id.slice(7);
					if (id == questions[group][currentQuestion].right) {
						socket.emit('points',turma);
						
						$("body").css("background-color","greenyellow")
						setTimeout(function(){
							$("body").css("background-color","Lavender")
							nextQuestion();
						},1000);
					}else{
						$("body").css("background-color","rgb(156, 22, 22)")
						$(".curquestion").css("color","Lavender")
						setTimeout(function(){
							$("body").css("background-color","Lavender")
							$(".curquestion").css("color","Black")
							nextQuestion();
						},1000);
						
					}

					getPoints();
				})

					function getPoints(){
						socket.emit('Get Points', turma);
					}
				
					socket.on('Recieve Points', function(data){
							$("#points").html(data.points);
					});
			});
		</script>
	</body>
</html>